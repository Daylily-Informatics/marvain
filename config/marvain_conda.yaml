name: marvain
channels:
  # Explicit channel ordering (prefer conda-forge first).
  - conda-forge
  - defaults
dependencies:
  # Match AWS SAM runtime.
  - python=3.11
  - pip

  # Tooling
  - awscli
  - pytest
  - typer
  - click
  - pyyaml

  # Common runtime deps used across this repo (legacy GUI + functions + tools)
  - boto3
  - python-dateutil
  - fastapi
  - mangum
  - uvicorn
  - jinja2
  - requests
  - python-multipart
  - websockets
  - httpx
  - python-dotenv

  # Packages not consistently available via conda (or with extras)
  - pip:
      - awscli  # v2 requires awscrt crypto EC support (needs awscrt >= 0.28.4)
      - awscrt
      - aws-sam-cli  # SAM CLI for build/deploy (conda package is outdated)
      - amazon-transcribe
      - livekit-agents[openai]
      - livekit-plugins-noise-cancellation
      - python-jose[cryptography]  # JWT validation for Cognito auth
      - itsdangerous  # Session signing for SessionMiddleware
